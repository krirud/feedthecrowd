<div class="row">
    <div class="col-sm-9">
        <h1>Event</h1>
    </div>
    <div class="col-sm-3">
        <button class="btn btn-success" (click)="exportAsXLSX()">
            <i class="fas fa-file-excel"></i> Export products to Excel</button>
    </div>
</div>
<form [formGroup]="eventForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
        <label for="title" class="navbar-brand">Title</label>
        <input type="text" formControlName="title" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && f.title.errors }" value="{{event?.title}}" />
        <div *ngIf="submitted && f.title.errors" class="invalid-feedback">
            <div *ngIf="f.title.errors.required">Title is required</div>
        </div>
    </div>
    <div class="row">
        <div class="form-group col-sm-4">
            <label for="peoplecount" class="navbar-brand">People Count</label>
            <input type="number" formControlName="peoplecount" class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f.peoplecount.errors }" value="{{event?.peopleCount}}" />
            <div *ngIf="submitted && f.peoplecount.errors" class="invalid-feedback">
                <div *ngIf="f.peoplecount.errors.required">People count is required</div>
            </div>
        </div>
        <div class="form-group col-sm-4">
            <label for="eventStartDate" class="navbar-brand">Event Start Date</label>
            <input type="date" formControlName="eventStartDate" class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f.eventStartDate.errors }"
                value="{{event?.eventStartDate | date: 'yyyy-MM-dd'}}" />
            <div *ngIf="submitted && f.eventStartDate.errors" class="invalid-feedback">
                <div *ngIf="f.eventStartDate.errors.required">Start date is required</div>
            </div>
        </div>
        <div class="form-group col-sm-4">
            <label for="eventEndDate" class="navbar-brand">Event End Date</label>
            <input type="date" formControlName="eventEndDate" class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f.eventEndDate.errors }"
                value="{{event?.eventEndDate | date: 'yyyy-MM-dd'}}" />
            <div *ngIf="submitted && f.eventEndDate.errors" class="invalid-feedback">
                <div *ngIf="f.eventEndDate.errors.required">End date is required</div>
            </div>
        </div>
    </div>
    <div class="row save-button">
        <button class="btn btn-success" type="submit">Update event</button>
    </div>
</form>
<br /><br />
    <div class="row">
        <h2 style="margin-left: 5px;">Recipes</h2>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Title</th>
                <th scope="col">Time</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let r of recipes; let i = index">
                <td>{{i+1}}</td>
                <td>
                    <a style="cursor: pointer;" (click)="onRecipeRowClick(r)">{{r.title}}
                        <i class="fas fa-angle-double-right"></i>
                    </a>
                </td>
                <td>{{r.time}}</td>
                <td>
                    <i style="cursor: pointer;" class="fas fa-trash" (click)="removeRecipe(r.id)"></i>
                </td>
            </tr>
        </tbody>
    </table>